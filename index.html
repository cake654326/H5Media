<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=640,user-scalable=no"/>
<title>Canvas Mask</title>
<meta name="description" content="" />
<meta name="keywords" content="" />
<style type="text/css">
body,div,canvas,img{
    margin:0;
    padding:0;
    border:0;
}
html,body{
    height:100%;
}
#wrap{
    min-height:100%;
    position:relative;
}
</style>
</head>
<body>
<div>
    音频：<button id="mp3">正在加载音频</button><br/>
</div>
<div>
    视频：<button id="mp4">正在加载视频</button><br/>
</div>
	<script type="text/javascript" src="src/media.js"></script>
    <script>
        function $(selector){
            return document.getElementById(selector);
        }
        if(Media.audio){
            var btn=$('mp3'),
                mp3=new Media({src:'audio/mp3.mp3',type:'audio'});
            mp3.on('ready',function(){
                btn.innerHTML='准备就绪，点击开始播放（时长：'+this.length+'）';
            }).on('play',function(){
                btn.innerHTML='正在播放';
            }).on('pause',function(){
                btn.innerHTML='已暂停';
            }).on('end',function(){
                btn.innerHTML='播放完毕';
            });
            btn.addEventListener('click',function(){
                if(mp3.playing){
                    mp3.pause();
                }else{
                    mp3.play();
                }
            },false);
        }else{
            $('mp3').innerHTML='不支持该媒体文件';
        }

        if(Media.video){
            var btn1=$('mp4'),
                mp4=new Media({src:'video/mp4.mp4',width:300,height:500});
            btn1.parentNode.appendChild(mp4.media);
            mp4.on('ready',function(){
                btn1.innerHTML='准备就绪，点击开始播放（时长：'+this.length+'）';
            }).on('play',function(){
                btn1.innerHTML='正在播放';
            }).on('pause',function(){
                btn1.innerHTML='已暂停';
            }).on('end',function(){
                btn1.innerHTML='播放完毕';
            });
            btn1.addEventListener('click',function(){
                if(mp4.playing){
                    mp4.pause();
                }else{
                    mp4.play();
                }
            },false);
        }else{
            $('mp4').innerHTML='不支持该媒体文件';
        }
    </script>
</body>
</html>
